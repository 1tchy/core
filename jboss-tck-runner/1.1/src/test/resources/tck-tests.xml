<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<!-- JSR-299 TCK TestNG configuration for Weld -->
<suite name="Weld / JBoss AS run of CDI TCK" verbose="0" configfailurepolicy="continue">
    
    <listeners>
        <listener class-name="org.jboss.weld.tck.SingleTestMethodInterceptor"/>
    </listeners>
    
    <test name="CDI TCK">

        <packages>
            <package name="org.jboss.jsr299.tck.tests.*" />
            <package name="org.jboss.jsr299.tck.interceptors.tests.*" />
        </packages>
        
        <classes>

            <!-- Issues in the TCK -->
            <class name="org.jboss.jsr299.tck.tests.context.DestroyForSameCreationalContext2Test">
                <methods>
                    <exclude name="testDestroyForSameCreationalContextOnly" />
                </methods>
            </class>
            <class name="org.jboss.jsr299.tck.tests.context.DestroyedInstanceReturnedByGetTest">
                <methods>
                    <exclude name="testDestroyedInstanceMustNotBeReturnedByGet" />
                </methods>
            </class>
            <!-- CDITCK-212 -->
            <class name="org.jboss.jsr299.tck.tests.context.DestroyedInstanceReturnedByGetTest">
                <methods>
                    <exclude name="testDestroyedInstanceMustNotBeReturnedByGet" />
                </methods>
            </class>
            <!-- TCK tests no longer valid for CDI 1.1 -->
            <!-- CDI-88/CDITCK-174 -->
            <class name="org.jboss.jsr299.tck.tests.extensions.afterBeanDiscovery.AfterBeanDiscoveryTest">
                <methods>
                    <exclude name="testProcessObserverMethodFiredWhileAddingObserverMethod" />
                </methods>
            </class>
            <!-- CDI-206 -->
            <class name="org.jboss.jsr299.tck.tests.context.conversation.ClientConversationContextTest">
                <methods>
                    <exclude name="testNonexistentConversationExceptionThrown" />
                </methods>
            </class>
            <!-- CDI-180 -->
             <class name="org.jboss.jsr299.tck.tests.context.request.ejb.EJBRequestContextTest">
                <methods>
                    <exclude name=".*" />
                </methods>
            </class>

            <!-- Issues in Weld (the RI) -->
            <!-- WELD-458 -->
            <class name="org.jboss.jsr299.tck.tests.interceptors.definition.broken.interceptorForLifecycleTargetMethod.InterceptorForLifecycleTargetMethodTest">
                <methods>
                    <exclude name="testInterceptorForLifecycleTargetMethod" />
                </methods>
            </class>
            <!-- WELD-986 -->
            <class name="org.jboss.jsr299.tck.tests.interceptors.definition.broken.observer.InterceptorWithObserverMethodTest">
                <methods>
                    <exclude name="testInterceptorWithObserverMethodNotOk" />
                </methods>
            </class>
            <class name="org.jboss.jsr299.tck.tests.decorators.definition.broken.observer.DecoratorWithObserverMethodTest">
                <methods>
                    <exclude name="testDecoratorWithObserverMethodNotOk" />
                </methods>
            </class>
            <!-- WELD-998 -->
            <class name="org.jboss.jsr299.tck.tests.definition.bean.custom.CustomBeanImplementationTest">
                <methods>
                    <exclude name=".*" />
                </methods>
            </class>
            <!-- WELD-991 --> 
            <class name="org.jboss.jsr299.tck.tests.lookup.manager.ManagerTest">
                <methods>
                    <exclude name="testGetReferenceWithIllegalBeanType" />
                </methods>
            </class>
            <!-- WELD-430 -->
            <class name="org.jboss.jsr299.tck.tests.decorators.invocation.DecoratorInvocationTest">
                <methods>
                    <exclude name="testDecoratorInvokesDelegateMethodOutsideOfBusinessMethodInterception" />
                </methods>
            </class>
            <!-- WELD-997 -->
            <class name="org.jboss.jsr299.tck.tests.extensions.interceptors.custom.CustomInterceptorInvocationTest">
                <methods>
                    <exclude name="testCustomInterceptorInvocation" />
                </methods>
            </class>
            <!-- WELD-977 -->
            <class name="org.jboss.jsr299.tck.tests.implementation.producer.method.definition.ProducerMethodDefinitionTest">
                <methods>
                    <exclude name="testNonStaticProducerMethodNotInheritedBySpecializingSubclass" />
                </methods>
            </class>
            <class name="org.jboss.jsr299.tck.tests.implementation.producer.field.lifecycle.ProducerFieldLifecycleTest">
                <methods>
                    <exclude name=".*" />
                </methods>
            </class>
             <class name="org.jboss.jsr299.tck.tests.inheritance.specialization.simple.SimpleBeanSpecializationTest">
                <methods>
                    <exclude name="testProducerMethodOnSpecializedBeanNotCalled" />
                </methods>
            </class>
            <!-- WELD-993 --> 
            <class name="org.jboss.jsr299.tck.tests.lookup.injection.non.contextual.ws.InjectionIntoWebServiceEndPointTest">
                <methods>
                    <exclude name="testInjectionIntoWebServiceEndpoint" />
                    <exclude name="testResourceBeanTypes"/>
                </methods>
            </class>
            <!-- WELD-1021 -->
            <class name="org.jboss.jsr299.tck.tests.decorators.definition.DecoratorDefinitionTest">
                <methods>
                    <exclude name="testAbstractDecoratorNotImplementingMethodOfDecoratedType" />
                </methods>
            </class>
            <!-- WELD-1034 -->
            <class name="org.jboss.jsr299.tck.tests.lookup.injectionpoint.InjectionPointTest">
                <methods>
                    <exclude name="testIsDelegate" />
                </methods>
            </class>
            <!-- WELD-1038 -->
            <class name="org.jboss.jsr299.tck.tests.extensions.annotated.AlternativeMetaDataTest">
                <methods>
                    <exclude name="testGetAnnotations" />
                </methods>
            </class>
            <!-- WELD-1039 -->
            <class name="org.jboss.jsr299.tck.tests.interceptors.definition.enterprise.jms.MessageDrivenBeanInterceptorInvocationTest">
                <methods>
                    <exclude name="testMessageDrivenBeanMethodIntercepted" />
                </methods>
            </class>
            <!-- WELD-1035 -->
            <class name="org.jboss.jsr299.tck.tests.lookup.injection.non.contextual.jms.ContainerEventTest">
                <methods>
                    <exclude name="testProcessInjectionTargetEventFiredForMessageDrivenBean" />
                </methods>
            </class>
            <!-- WELD-1046 -->
            <class name="org.jboss.jsr299.tck.tests.extensions.lifecycle.processBeanAttributes.VerifyValuesTest">
                <methods>
                    <exclude name="testProducerMethodAnnotated" />
                    <exclude name="testProducerMethodBeanAttributes" />
                    <exclude name="testProducerFieldAnnotated" />
                    <exclude name="testProducerFieldBeanAttributes" />
                </methods>
            </class>           
            <!-- WELD-1047 -->
            <class name="org.jboss.jsr299.tck.tests.extensions.lifecycle.processBeanAttributes.specialization.SpecializationTest">
                <methods>
                    <exclude name="testProcessBeanAttributesFiredProperlyForSpecializedBean" />
                </methods>
            </class>
            <!-- Issues in JBoss AS -->
            <!-- AS7-3107 -->
            <class name="org.jboss.jsr299.tck.tests.context.jms.MessageListenerContextTest">
                <methods>
                    <exclude name=".*" />
                </methods>
            </class>

            <!-- JBAS-8306 -->
            <class name="org.jboss.jsr299.tck.tests.context.request.ejb.EJBRequestContextTest">
                <methods>
                    <exclude name="testRequestScopeActiveDuringCallToEjbTimeoutMethod" />
                    <exclude name="testRequestScopeDestroyedAfterCallToEjbTimeoutMethod" />
                </methods>
            </class>

            <!-- Remove exclusion when AS7 suports SFSB serialization properly -->
            <class name="org.jboss.jsr299.tck.tests.implementation.enterprise.lifecycle.EnterpriseBeanLifecycleTest">
                <methods>
                    <exclude name="testSerializeSFSB" />
                </methods>
            </class>

        </classes>
    </test>

</suite>
