<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<!-- JSR-299 TCK TestNG configuration for Weld -->

<suite name="Weld / JBoss AS run of CDI TCK" verbose="0"  >
   <test name="CDI TCK">
      <method-selectors>
         <method-selector>
            <selector-class name="org.jboss.testharness.impl.testng.DisableIntegrationTestsMethodSelector" />
         </method-selector>
      </method-selectors>
      <packages>
         <package name="org.jboss.jsr299.tck.tests.*" />
         <package name="org.jboss.jsr299.tck.interceptors.tests.*" />
      </packages>
      <classes>
      
         <!-- Issues in the TCK -->
         
         <!-- CDITCK-103 -->
         <class name="org.jboss.jsr299.tck.tests.lookup.injection.non.contextual.ContainerEventTest">
            <methods>
               <exclude name="testProcessAnnotatedTypeEventFiredForFilter" />
               <exclude name="testProcessAnnotatedTypeEventFiredForJsfManagedBean" />
               <exclude name="testProcessAnnotatedTypeEventFiredForServlet" />
               <exclude name="testProcessAnnotatedTypeEventFiredForServletListener" />
               <exclude name="testProcessAnnotatedTypeEventFiredForTagHandler" />
               <exclude name="testProcessAnnotatedTypeEventFiredForTagLibraryListener" />
               <exclude name="testProcessInjectionTargetEventFiredForJsfManagedBean" />
               <exclude name="testProcessInjectionTargetEventFiredForTagHandler" />
            </methods>
         </class>
         <class name="org.jboss.jsr299.tck.tests.lookup.injection.non.contextual.InjectionIntoNonContextualComponentTest">
            <methods>
               <exclude name="testFilterInitializerMethodCalled" />
               <exclude name="testInjectionIntoFilter" />
               <exclude name="testInjectionIntoJSFManagedBean" />
               <exclude name="testInjectionIntoServlet" />
               <exclude name="testInjectionIntoServletListener" />
               <exclude name="testInjectionIntoTagHandler" />
               <exclude name="testInjectionIntoTagLibraryListener" />
               <exclude name="testServletInitializerMethodCalled" />
               <exclude name="testServletListenerInitializerMethodCalled" />
               <exclude name="testTagLibraryListenerInitializerMethodCalled" />
            </methods>
         </class>
         
         <!-- CDITCK-104, CDITCK-110 -->
         <class name="org.jboss.jsr299.tck.tests.context.conversation.client.ClientConversationContextTest">
            <methods>
               <exclude name="testConversationPropagationToNonExistentConversationLeadsToTransientConversation" />
            </methods>
         </class>
         
         <!-- CDITCK-104 -->
         <class name="org.jboss.jsr299.tck.tests.context.conversation.client.InvalidatingSessionDestroysConversationTest">
            <methods>
               <exclude name="testInvalidatingSessionDestroysConversation" />
            </methods>
         </class>
         
         <!-- CDITCK-110 -->
         <class name="org.jboss.jsr299.tck.tests.context.conversation.client.ClientConversationContextTest">
            <methods>
               <exclude name="testConversationsDontCrossSessionBoundary1" />
               <exclude name="testConversationsDontCrossSessionBoundary2" />
            </methods>
         </class>
         
         <!-- CDITCK-109 -->
         <class name="org.jboss.jsr299.tck.tests.context.conversation.ConversationBeginTest">
            <methods>
               <exclude name="testBeginAlreadyLongRunningConversationThrowsException" />
               <exclude name="testConversationBeginMakesConversationLongRunning" />
            </methods>
         </class>
         <class name="org.jboss.jsr299.tck.tests.context.conversation.ConversationContextTest">
            <methods>
               <exclude name="testDefaultConversationIsTransient" />
               <exclude name="testTransientConversationHasNullId" />
            </methods>
         </class>
         <class name="org.jboss.jsr299.tck.tests.context.conversation.ConversationEndTest">
            <methods>
               <exclude name="testConversationEndMakesConversationTransient" />
               <exclude name="testEndTransientConversationThrowsException" />
            </methods>
         </class>
         <class name="org.jboss.jsr299.tck.tests.context.conversation.ConversationIdSetByApplicationTest">
            <methods>
               <exclude name="testConversationIdMayBeSetByApplication" />
            </methods>
         </class>
         <class name="org.jboss.jsr299.tck.tests.context.conversation.ConversationIdSetByContainerTest">
            <methods>
               <exclude name="testConversationBeginMakesConversationLongRunning" />
            </methods>
         </class>
         <class name="org.jboss.jsr299.tck.tests.context.conversation.ConversationTimeoutTest">
            <methods>
               <exclude name="testConversationHasDefaultTimeout" />
               <exclude name="testSetConversationTimeoutOverride" />
            </methods>
         </class>
         
         <!-- Issues in Weld (the RI) -->

         <!-- WELD-390 fixed, but TCK test is broken in 1.0.1-CR1 -->
         <class name="org.jboss.jsr299.tck.interceptors.tests.lifecycleCallback.order.InvocationOrderTest">
            <methods>
               <exclude name="testInvocationOrder" />
            </methods>
         </class>
          
         <!-- WELD-269 -->
         <class name="org.jboss.jsr299.tck.tests.decorators.custom.CustomDecoratorTest">
            <methods>
               <exclude name="testCustomImplementationOfDecoratorInterface" />
            </methods>
         </class>

         <!-- WELD-401 -->
         <class name="org.jboss.jsr299.tck.tests.event.broken.observer.notBusinessMethod.EJBObserverMethodNotBusinessMethodTest">
            <methods>
               <exclude name="testObserverMethodOnEnterpriseBeanNotBusinessMethodOrStaticFails" />
            </methods>
         </class>

         <!-- WELD-325 fixed, pending on CDITCK-102 -->.
         <class name="org.jboss.jsr299.tck.tests.context.dependent.DependentContextTest">
             <methods>
                 <exclude name="testDependentScopedInterceptorsAreDependentObjectsOfBean"/>
             </methods>
         </class>
         
         <!-- Issues in JBoss AS -->
         
         <!-- JBAS-7421 -->
         <class name="org.jboss.jsr299.tck.interceptors.tests.invocationContext.InvocationContextTest">
            <methods>
               <exclude name="testGetTimerMethod" />
            </methods>
         </class>
         
         <!-- Requires EJB 3.1 -->
         
         <class name="org.jboss.jsr299.tck.tests.context.request.ejb.EJBRequestContextTest">
            <methods>
               <exclude name="testRequestScopeActiveDuringCallToEjbTimeoutMethod" />
               <exclude name="testRequestScopeDestroyedAfterCallToEjbTimeoutMethod" />
            </methods>
         </class>
         <class name="org.jboss.jsr299.tck.tests.implementation.enterprise.broken.singletonWithRequestScope.SingletonWithRequestScopeTest">
            <methods>
               <exclude name="testSingletonWithRequestScopeFails" />
            </methods>
         </class>
         <class name="org.jboss.jsr299.tck.tests.implementation.enterprise.broken.singletonWithSessionScope.SingletonWithSessionScopeTest">
            <methods>
               <exclude name="testSingletonWithSessionScopeFails" />
            </methods>
         </class>
         <class name="org.jboss.jsr299.tck.tests.implementation.enterprise.definition.EnterpriseBeanDefinitionTest">
            <methods>
               <exclude name="testEnterpriseBeanClassLocalView" />
               <!-- WELDINT-31 -->
               <exclude name="testConstructorAnnotatedInjectCalled" />
            </methods>
         </class>
         <!-- WELDINT-1 -->
         <class name="org.jboss.jsr299.tck.tests.deployment.packaging.bundledLibrary.LibraryInEarTest">
            <methods>
               <exclude name="test" />
            </methods>
         </class>
         <!-- WELDINT-31 -->
         <class name="org.jboss.jsr299.tck.tests.implementation.enterprise.newBean.NewEnterpriseBeanICTest">
            <methods>
               <exclude name="testNewBeanHasSameConstructor" />
            </methods>
         </class>
         <!-- WELDINT-27 -->
         <class name="org.jboss.jsr299.tck.tests.interceptors.definition.enterprise.interceptorOrder.SessionBeanInterceptorOrderTest">
            <methods>
               <exclude name="testInterceptorsDeclaredUsingInterceptorsCalledBeforeInterceptorBinding" />
            </methods>
         </class>
         <!-- JBAS-7046 -->
         <class name="org.jboss.jsr299.tck.tests.lookup.injection.enterprise.SessionBeanInjectionTest">
            <methods>
               <exclude name="" />
            </methods>
         </class>
         <!-- JBAS-7046 -->
         <class name="org.jboss.jsr299.tck.tests.lookup.injection.non.contextual.ws.InjectionIntoWebServiceEndPointTest">
            <methods>
               <exclude name="testInjectionIntoWebServiceEndpoint" />
            </methods>
         </class>
         <!-- JBAS-7046 -->
         <class name="org.jboss.jsr299.tck.tests.lookup.injection.enterprise.SessionBeanInjectionTest">
            <methods>
               <exclude name="testInjectionOnEJBInterceptor" />
            </methods>
         </class>
         <!-- JBAS-7046 -->
         <class name="org.jboss.jsr299.tck.tests.context.application.ejb.EJBApplicationContextTest">
            <methods>
               <exclude name="testApplicationScopeActiveDuringWebServiceInvocation" />
            </methods>
         </class>
         <!-- WELDINT-22 -->
         <class name="org.jboss.jsr299.tck.tests.lookup.injection.non.contextual.ContainerEventTest">
            <methods>
               <exclude name="testProcessInjectionTargetEventFiredForServletListener" />
               <exclude name="testProcessInjectionTargetEventFiredForTagLibraryListener" />
               <exclude name="testProcessInjectionTargetEventFiredForFilter" />
               <exclude name="testTypeOfProcessInjectionTargetParameter" />
               <exclude name="testProcessInjectionTargetEventFiredForServlet" />
            </methods>
         </class>
         
         <!-- WELDINT-36 -->
         <class name="org.jboss.jsr299.tck.tests.lookup.injection.non.contextual.InjectionIntoNonContextualComponentTest">
            <methods>
               <exclude name="testInjectionIntoTagHandler" />
            </methods>
         </class>
         <!-- WELDINT-26 -->
         <class name="org.jboss.jsr299.tck.tests.lookup.injectionpoint.broken.not.bean.InjectionPointTest">
            <methods>
               <exclude name="testDefinitionErrorDetected" />
            </methods>
         </class>
         <!-- WELDINT-19 -->
         <class name="org.jboss.jsr299.tck.tests.lookup.manager.jndi.ManagerTest">
            <methods>
               <exclude name="testManagerLookupInJndi" />
            </methods>
         </class>
         
         <!-- JBAS-7676 -->
         <class name="org.jboss.jsr299.tck.tests.definition.qualifier.enterprise.EnterpriseQualifierDefinitionTest">
            <methods>
               <exclude name="testQualifierDeclaredInheritedIsInherited" />
               <exclude name="testQualifierNotDeclaredInheritedIsNotInherited" />
               <exclude name="testQualifierDeclaredInheritedIsIndirectlyInherited" />
               <exclude name="testQualifierNotDeclaredInheritedIsNotIndirectlyInherited" />
            </methods>
         </class>
         
         <!-- JBAS-7677 -->
         <class name="org.jboss.jsr299.tck.tests.implementation.enterprise.definition.EnterpriseBeanDefinitionTest">
            <methods>
               <exclude name="testBeanTypesAreLocalInterfacesWithoutWildcardTypesOrTypeVariablesWithSuperInterfaces" />
               <exclude name="testBeanWithNamedAnnotation" />
               <exclude name="testBeanWithQualifiers" />
               <exclude name="testBeanWithScopeAnnotation" />
               <exclude name="testBeanWithStereotype" />
               <exclude name="testDefaultName" />
               <exclude name="testObjectIsInAPITypes" />
               <exclude name="testRemoteInterfacesAreNotInAPITypes" />
               <exclude name="testSingletonWithApplicationScopeOK" />
               <exclude name="testSingletonWithDependentScopeOK" />
               <exclude name="testStatelessMustBeDependentScoped" />
            </methods>
         </class>
         <class name="org.jboss.jsr299.tck.tests.implementation.enterprise.definition.EnterpriseBeanViaXmlTest">
            <methods>
               <exclude name="testEjbDeclaredInXmlNotSimpleBean" />
            </methods>
         </class>
         
         <!-- WELDINT-37 -->
         <class name="org.jboss.jsr299.tck.tests.event.observer.transactional.TransactionalObserversTest">
            <methods>
               <exclude name="testTransactionalObserverNotifiedImmediatelyWhenNoTransactionInProgress" />
            </methods>
         </class>
         <class name="org.jboss.jsr299.tck.tests.event.observer.transactional.TransactionalObserversTest">
            <methods>
               <exclude name="testBeforeTransactionCompletionObserver" />
            </methods>
         </class>
         
      </classes>
   </test>
   
</suite>
