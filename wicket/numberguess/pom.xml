<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

   <modelVersion>4.0.0</modelVersion>

   <parent>
      <groupId>org.jboss.weld.examples</groupId>
      <artifactId>weld-examples-parent</artifactId>
      <version>1.0.0-SNAPSHOT</version>
      <relativePath>../../pom.xml</relativePath>
   </parent>

   <groupId>org.jboss.weld.examples</groupId>
   <artifactId>weld-wicket-numberguess</artifactId>
   <packaging>war</packaging>
   <name>Weld Examples: Wicket Numberguess</name>

   <dependencies>

      <dependency>
         <groupId>javax.enterprise</groupId>
         <artifactId>cdi-api</artifactId>
         <scope>provided</scope>
      </dependency>

      <dependency>
         <groupId>javax.annotation</groupId>
         <artifactId>jsr250-api</artifactId>
         <scope>provided</scope>
      </dependency>

      <dependency>
         <groupId>org.mortbay.jetty</groupId>
         <artifactId>jetty</artifactId>
         <scope>test</scope>
      </dependency>

      <dependency>
         <groupId>org.jboss.weld</groupId>
         <artifactId>weld-wicket</artifactId>
      </dependency>

   </dependencies>

   <build>
      <finalName>weld-numberguess-wicket</finalName>

      <!--
         Override the resource filtering to support storing html
         alongside classes
      -->
      <resources>
         <resource>
            <filtering>false</filtering>
            <directory>src/main/resources</directory>
         </resource>
         <resource>
            <filtering>false</filtering>
            <directory>src/main/java</directory>
            <includes>
               <include>**</include>
            </includes>
            <excludes>
               <exclude>**/*.java</exclude>
            </excludes>
         </resource>
      </resources>
      <testResources>
         <testResource>
            <filtering>false</filtering>
            <directory>src/test/java</directory>
            <includes>
               <include>**</include>
            </includes>
            <excludes>
               <exclude>**/*.java</exclude>
            </excludes>
         </testResource>
      </testResources>

      <plugins>
         <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <configuration>
               <connectors>
                  <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector">
                     <port>${jetty.http.port}</port>
                     <maxIdleTime>3600000</maxIdleTime>
                  </connector>
               </connectors>
               <contextPath>/${project.build.finalName}</contextPath>
               <overrideWebXml>src/main/webapp/WEB-INF/jetty-additions-to-web.xml</overrideWebXml>
            </configuration>
         </plugin>
         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <configuration>
               <webResources>
                  <resource>
                     <directory>src/main/webapp/WEB-INF</directory>
                     <targetPath>WEB-INF</targetPath>
                     <includes>
                        <include>**/beans.xml</include>
                        <include>**/web.xml</include>
                     </includes>
                  </resource>
               </webResources>
            </configuration>
         </plugin>
      </plugins>
   </build>

   <profiles>
      <profile>
         <id>jetty</id>
         <dependencies>

            <dependency>
               <groupId>org.jboss.weld.servlet</groupId>
               <artifactId>weld-servlet</artifactId>
               <version>1.0.0-SNAPSHOT</version>
               <scope>runtime</scope>
            </dependency>

            <dependency>
               <groupId>org.apache.wicket</groupId>
               <artifactId>wicket</artifactId>
            </dependency>

            <dependency>
               <groupId>javax.annotation</groupId>
               <artifactId>jsr250-api</artifactId>
            </dependency>

            <!--  JETTY DEPENDENCIES FOR IN IDE TESTING  -->

            <dependency>
               <groupId>javax.servlet.jsp</groupId>
               <artifactId>jsp-api</artifactId>
               <scope>test</scope>
            </dependency>

            <dependency>
               <groupId>javax.el</groupId>
               <artifactId>el-api</artifactId>
               <scope>test</scope>
            </dependency>

            <dependency>
               <groupId>org.mortbay.jetty</groupId>
               <artifactId>jetty</artifactId>
               <scope>test</scope>
            </dependency>

         </dependencies>
      </profile>
      <profile>
         <id>jboss5</id>
         <activation>
            <activeByDefault>true</activeByDefault>
         </activation>
         <dependencies>

            <dependency>
               <groupId>org.apache.wicket</groupId>
               <artifactId>wicket</artifactId>
            </dependency>

            <dependency>
               <groupId>org.slf4j</groupId>
               <artifactId>slf4j-api</artifactId>
               <scope>provided</scope>
            </dependency>

         </dependencies>
      </profile>
   </profiles>

   <properties>
      <jetty.http.port>9090</jetty.http.port>
   </properties>

   <scm>
      <connection>scm:svn:http://anonsvn.jboss.org/repos/weld/examples/trunk/wicket/numberguess</connection>
      <developerConnection>scm:svn:https://svn.jboss.org/repos/weld/examples/trunk/wicket/numberguess</developerConnection>
     <url>http://fisheye.jboss.org/browse/weld/examples/trunk/wicket/numberguess</url>
  </scm>

</project>
